---
namespace: [A, B]

structs:
  Test1:
    json: true
    namespace: [C]
    description: "Sample struct 1."
    json_indent: 4
    fields:
      - name: field1
        description: A field.
        type: uint8_t

      - name: field2
        type: Enum1

      - name: field3
        type: double

  Test2:
    json: true
    fields:
      - name: field1
        type: int8_t

      - name: field2
        description: A field.
        type: int16_t

      - name: field3
        type: float

  Test3:
    json: true
    fields: &fields
      - name: field1
        volatile: true
        type: int32_t
        description: A field.

        fields:
          - {name: bit_field1, index: 0, write: false}
          - {name: bit_field2, index: 1, read: false}
          - {name: bit_field3, index: 2}
          - {name: bit_field4, index: 3}
          - {name: bit_field5, index: 4, width: 4}
          - {name: bit_field6, index: 8, width: 10}

      - name: field2
        type: C::Test1
        description: Another field.

      - name: field3
        type: Test2

      - name: field4
        type: C::Enum2

      - name: field5
        type: uint16_t

  # Test scenarios where features are turned off.
  Test4:
    fields: *fields
    stream: false
  Test5:
    fields: *fields
    codec: false
  Test6:
    fields: *fields
    json: false
  Test7:
    fields: *fields
    stream: false
    codec: false
    json: false

enums:
  Enum1:
    json: true
    underlying: uint16_t
    enum:
      A:
      B: {description: A sample value.}
      C: {value: 1000}

  Enum2:
    json: true
    use_map: false
    namespace: [C]
    description: "Sample enum 2."
    json_indent: 4
    enum: &enum
      unknown:
      red: {value: 1, description: A sample value.}
      green:
      blue: {value: 5}

  Enum3:
    json: false
    enum: *enum
